<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <!-- Font Awesome JS -->
    <script class="lazy" data-src="https://kit.fontawesome.com/0000000000.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="stelySheet/signup.css">


    <title>Doctor Registration form </title>
</head>
<body>
  <!-- main -->
  
  <div class="main-w3layouts wrapper">
    <h1>Doctor Sign Up Screen</h1>
    <h1>Fill in the data below.</h1>
    <div class="main-agileinfo">
      <div class="agileits-top">
        <form class="form" id="loginForm" action="#" method="post">


          <input class="text" type="text" id="Username" name="Username" placeholder="Username" required="">


          <input class="text email" type="email" id="email" name="email" placeholder="Email" required="">


          <input class="text" id="password1" type="password" name="password" placeholder="Password" required="">


          <input class="text w3lpass" id="password2" type="password" name="password" placeholder="Confirm Password" required="">


          <div class="wthree-text">
            <label class="anim">
              <input type="checkbox" class="checkbox" required="">
              <span>I Agree To The Terms & Conditions</span>
            </label>

            <div class="clear"> </div>
          </div>
          <input type="submit" value="SIGNUP" a>
        </form>


        <p>Don't have an Account? <a href="doctorLog.html"> Login Now!</a></p>

      </div>
    </div>
    
    
   
  <!-- //main -->
<!--JavaScript-->

<script>
document.addEventListener('DOMContentLoaded', () => {
  document.getElementById('loginForm').addEventListener('submit', event => {
    event.preventDefault()
    ajaxPost()
  })
  async function ajaxPost () {
    // PREPARE FORM DATA
    const pass1 = document.getElementById('password1').value
    const pass2 = document.getElementById('password2').value
    if (pass1 === pass2) {
      const Username= document.getElementById("Username").value;
      const email= document.getElementById("email").value;
      const password= document.getElementById("password").value;
      return
      
    }
    else{
          alert("password doesn't match try again");
        }
        const formData = {
      email: document.getElementById('email').value,
      password: pass1
    }
    console.log('post data', formData)

    try {
      const response = await fetch('http://127.0.0.1:3000//Api/v1/user/userReg', {
        method: 'PUT', 
        credentials: 'same-origin', 
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(formData)
        
      })
      await response.json()
      alert('"User created Success')
      window.location.replace('login.html')
    } catch (e) {
      alert('Error!')
      console.log('ERROR: ', e)
    }

    // Reset FormData after Posting
    resetData()
  }
  function resetData () {
    document.getElementById('Username').value = ''
    document.getElementById('email').value = ''
  }
})


      

</script>



   
  
</body>
</html>