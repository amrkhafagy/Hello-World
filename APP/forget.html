<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <!-- Font Awesome JS -->
    <script class="lazy" data-src="https://kit.fontawesome.com/0000000000.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="stelySheet/signup.css">


    <title> password reset here </title>
</head>
<body>
  
    <!-- main -->


    <div class="main-w3layouts wrapper">
      <h1></h1>
      <h1>password reset here</h1>
      <div class="main-agileinfo">
        <div class="agileits-top">
          <form id="loginForm" action="#" method="post">

            <input class="text email" type="email"  id="email" name="email" placeholder="User Email" required="">

            
            <input class="text" id="password1" type="password" name="password" placeholder=" New Password" required="">


          
            <input class="text w3lpass" id="password2"type="password" name="password" placeholder="Confirm Password" required="">

            <div class="wthree-text">
              <label class="anim">
                <input type="checkbox" class="checkbox" required="">
                <span>I Agree To The Terms & Conditions</span>
              </label>
              <div class="clear"> </div>
            </div>
            <input type="submit" value="SIGNUP" a>
          </form>
          <p>Don't have an Account? <a href="loginuser.html"> Login Now!</a></p>
        </div>
      </div>
      
      
     
    <!-- //main -->

    <!--JavaScript-->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
          document.getElementById('loginForm').addEventListener('submit', event => {
            event.preventDefault()
      ajaxPost()
    });
    async function ajaxPost () {
      // PREPARE FORM DATA
      const pass1 = document.getElementById('password1').value
      const pass2 = document.getElementById('password2').value
      if (pass1 !== pass2) {
        alert('Password doesn\'t match please correct Confirm password')
        document.getElementById('password2').value = ''
        return
      }


      const formData = {
        email: document.getElementById('email').value,
        password: pass1
      }

      console.log('post data', formData)


      try {
        const response = await fetch(url, {
          method: 'PUT', 
          credentials: 'same-origin', 
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(formData) 
        })
        await response.json()
        alert('Password Reset Success Success')
        window.location.replace('login.html')
      } 
      catch (e) {
        alert('Error!')
        console.log('ERROR: ', e)
      }

      resetData()
    }
    function resetData () {
      document.getElementById('password1').value = ''
      document.getElementById('password2').value = ''
    }
  })


    </script>
        <!--JavaScript-->

 
	
	
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script class="lazy" data-src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script class="lazy" data-src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script class="lazy" data-src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
  
</body>
</html>